{"version":3,"sources":["app/Shared/components/Button/ButtonOutline.js","app/views/Solution1/SpeechRecognition.js","app/assets/ic_record.png","app/assets/ic_upload.png","app/redux/action-creators/recognition.js","app/views/Solution1/WebSocket.js","app/assets/ic_wave.png"],"names":["styled","button","p","div","createMarkup","htmlString","__html","DangerousHTML","className","dangerouslySetInnerHTML","ButtonShowing","onRecord","connectedWs","useSelector","state","recognitionReducer","Button","text","icon","iconRecord","textCustom","buttonCustom","onClick","SpeechRecognition","textRedux","useState","Col","Wrapper","Row","input","module","exports","updateAudioData","payload","dispatch","type","Actions","console","log","isStop","recorder","buffer","audioContext","SendDataComponent","recogRedux","useEffect","ws","readyState","WebSocket","OPEN","send","audioData","TestSocket","useDispatch","websocket","API_URL","onopen","onmessage","evt","message","JSON","parse","data","processJsonResponse","onclose","SocketRecognation","connectWs","setConnectWs","token","record","window","AudioContext","webkitAudioContext","resume","navigator","mediaDevices","getUserMedia","audio","then","stream","audioInput","createMediaStreamSource","createScriptProcessor","onaudioprocess","e","inputBuffer","getChannelData","int16ArrayData","convertFloat32ToInt16","length","sampleRate","i","Math","abs","connect","destination","catch","float32ArrayData","l","Int16Array","min","resp","status","result","hypotheses","transcript_normed","transcript","endsWith","slice","final"],"mappings":"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","file":"static/js/14.ea62e8cb.chunk.js","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\n\nconst ButtonOutline = ({ icon, text = '', id = 1, classNameCss, buttonCustom,textCustom }) => {\n\n  return (\n    <Wrapper className={`btn btn-outline-secondary btn-ux-outline ${id === 1 ? 'button1' : 'button2'} ${classNameCss}`}>\n      <Row className={`${buttonCustom} row`}>\n        <img src={icon} />\n        <Text className={`${textCustom}`}>{text}</Text>\n      </Row>\n    </Wrapper>\n  )\n}\n\nexport default ButtonOutline\n\nconst Wrapper = styled.button`\n  margin-left: 15px;\n`\nconst Text = styled.p`\n  margin: 0;\n  margin-left: 10px;\n  color: black;\n`\n\nconst Row = styled.div`\n  padding-left: 10px;\n  padding-right: 10px;\n`\n","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\n\nimport { useSelector } from 'react-redux'\n\nimport iconRecord from '../../assets/ic_record.png'\nimport iconUpload from '../../assets/ic_upload.png'\nimport iconWave from '../../assets/ic_wave.png'\n\nimport Button from '../../Shared/components/Button/Button'\nimport ButtonOutline from '../../Shared/components/Button/ButtonOutline'\n\nconst createMarkup = htmlString => {\n  return { __html: htmlString }\n}\n\nconst DangerousHTML = ({ htmlString }) => {\n  return (\n    <div\n      className='ux1-description'\n      dangerouslySetInnerHTML={createMarkup(htmlString)}\n    />\n  )\n}\n\nconst ButtonShowing = ({ onRecord }) => {\n  const connectedWs = useSelector(state => state.recognitionReducer.connectedWs)\n  return (\n    <Button\n      text='Ghi âm'\n      icon={iconRecord}\n      className={connectedWs ? 'btn--red' : 'btn--green'}\n      textCustom='text_green margin-left'\n      buttonCustom='button_green'\n      onClick={onRecord}\n    />\n  )\n}\n\nexport const SpeechRecognition = ({ onRecord }) => {\n  const textRedux = useSelector(state => state.recognitionReducer.text)\n\n  const [text, setText] = useState(textRedux)\n\n  // useEffect(() => {\n  //   // setText(textRedux)\n  // }, [textRedux])\n\n  return (\n    <section className=''>\n      <div className='margin-bottom-large'>\n        <h1 className='application__heading text-center margin-bottom-medium advantage__heading'>\n          Trải nghiệm\n        </h1>\n        <Wrapper className='container'>\n          <Row className='row'>\n            <Col className='col-lg-12 margin-bottom-medium main_so1'>\n              <div className='button-controller solution_1'>\n                <ButtonShowing onRecord={onRecord} />\n                {/* <Button\n                  text='Tải lên'\n                  icon={iconUpload}\n                  className='btn--green green margin-left'\n                  isMarginLeft\n                  textCustom='text_green'\n                  buttonCustom='button_green'\n                />\n                <ButtonOutline\n                  text='Mẫu file 1'\n                  icon={iconWave}\n                  id={1}\n                  classNameCss=' white'\n                  buttonCustom='button_white'\n                  textCustom='text_white'\n                />\n                <ButtonOutline\n                  text='Mẫu file 2'\n                  icon={iconWave}\n                  id={2}\n                  classNameCss=' white'\n                  buttonCustom='button_white'\n                  textCustom='text_white'\n                /> */}\n              </div>\n              <Col>\n                <div className='ux1-description-container'>\n                  <DangerousHTML htmlString={textRedux} />\n                </div>\n              </Col>\n            </Col>\n            {/* <Col className='col-lg-5 '> */}\n            {/* <Row className='margin-bottom-xs d-flex'>\n                <Input placeHolder='Enter Video URL' className='input' />\n                <button className='btn btn-danger ux1-play-btn'>Play</button>\n              </Row>\n              <iframe\n                className='youtube'\n                src='https://www.youtube.com/embed/E7wJTI-1dvQ'\n                frameBorder='0'\n                allow='autoplay; encrypted-media'\n                allowFullScreen\n                title='video'\n              /> */}\n            {/* </Col> */}\n          </Row>\n        </Wrapper>\n      </div>\n    </section>\n  )\n}\n\nconst Wrapper = styled.div``\n\nconst Row = styled.div`\n  margin-bottom: 2rem;\n`\n\nconst Intro = styled.p`\n  margin-top: 10px;\n  padding: 20px;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  min-height: 50vh;\n  clip-path: polygon(\n    0% 15%,\n    0 0,\n    15% 0%,\n    85% 0%,\n    85% 15%,\n    100% 15%,\n    85% 37%,\n    85% 85%,\n    85% 100%,\n    15% 100%,\n    0 100%,\n    0% 85%\n  );\n`\n\nconst Input = styled.input`\n  width: 70%;\n  border-radius: 7.38px;\n  outline: none;\n  border: none;\n`\n\nconst Col = styled.div``\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAYCAYAAADKx8xXAAAAAXNSR0IArs4c6QAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAADqADAAQAAAABAAAAGAAAAABxmHniAAABFUlEQVQ4Ee2U4XGCQBSEMeN/KcEOtJV0QAmWYAdJCXQQOpAS7EA7ECsg34d3zHETNI5/3Znn7b7dByeHFkWGvu9L6oc6hZKXWWwqDVAXKoe9+WHMOp9IdD29TaIIdUkwp5ckWixSYTLVOV+A2PuI5Nn1PXjniS05gRr/yJP+vpMbLfI7xKbw7ECrc6PznyHTmnj5OFZe7Z/wZb+6vSZszl9G5KE1WfTWodM4WAWxZ90G/teiZ0ZUw+4g50HeLmIgattye5UCHMevhNDo7IIvak2VoeT2hJntOCixQZ2pOehNh+IVMLzLjmqpCLk9n+ZjEByG55LLaBBs4Ol5bvToH2KGtePV/FSPfwUEOnQ6qJ/jyuCw5V8xWcXJn3d4ogAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADB/VeXAAAA2klEQVRIDe1V0Q2DIBCVxgEcpSO0k9SROgIjdARH6AjdoGxA3zNHQmiMd0I/arzkyWke78FxxK4zRIzRA6Nhip4q4hjmaGsCSa68jDYmUB1FOWQOKa8zKcTPmQHzOpNSnKeVDCSvM4EYBV4cKcjIDeT9izMTtz5KA43OSUOq4RwGq9X7/xL1aL0L9hmcc8/V/RoIohvT5Zk0cy33IHF3cAaa0mSca5ar0l7FEhIaYbLwyf35GbCL+ON4A4N1dUt8agGMwBI9gBtAk6U5W7977oBunm5Aq6DWHRg+l6BT3PpbzrMAAAAASUVORK5CYII=\"","import * as Actions from '../action-types'\n\nexport const updateAudioData = payload => {\n  return dispatch =>\n    dispatch({\n      type: Actions.GET_AUDIO,\n      payload\n    })\n}\n\nexport const updateSocket = payload => {\n  return dispatch =>\n    dispatch({\n      type: Actions.GET_SOCKET,\n      payload\n    })\n}\n\nexport const updateConnectedWS = payload => {\n  return dispatch =>\n    dispatch({\n      type: Actions.GET_CONNECTED_WS,\n      payload\n    })\n}\n\nexport const updateText = payload => {\n  return dispatch => \n    dispatch({\n      type: Actions.GET_TEXT,\n      payload\n    })\n}","import React, { Fragment, useEffect, useState } from 'react'\n\nimport { useSelector, useDispatch } from 'react-redux'\nimport * as Actions from '../../redux/action-creators/recognition'\nimport { SpeechRecognition } from './SpeechRecognition'\n\nconst print = console.log\nconst SILENT_THRESHOLD = 1000\nconst SILENT_DURATION = 10\n\nconst API_URL = 'ws://103.74.122.136/asr/stream/socket/16k/client/ws/speech'\n\nlet isConnected = false\nlet result = null // xâu text đang nhận dạng\nlet isStop = true // có đang DỪNG record audio hay không\n\nlet recorder = null // đối tượng recorder\nlet buffer = null // có chuyển về local được không?\nlet audioContext = null // đối tượng audio context\nlet countSilentDuration = 0\n\nconst SendDataComponent = () => {\n  const recogRedux = useSelector(state => state.recognitionReducer)\n  useEffect(() => {\n    if (recogRedux.ws && recogRedux.ws.readyState === WebSocket.OPEN) {\n      // console.log(\"Send buffer\")\n      recogRedux.ws.send(recogRedux.audioData)\n    }\n  }, [recogRedux.audioData])\n  return null\n}\n\nconst TestSocket = () => {\n  console.log('TestSocket rendered')\n  const dispatch = useDispatch()\n  // const textRedux = useSelector(state => state.recognitionReducer.text)\n  // if (ws !== null) return null\n  let url =\n    API_URL +\n    '?content-type=audio/x-raw' +\n    ',+layout=(string)interleaved' +\n    ',+rate=(int)' +\n    '44100' +\n    ',+format=(string)S16LE' +\n    ',+channels=(int)1'\n\n  // eslint-disable-next-line no-undef\n  const websocket = new WebSocket(url)\n\n  websocket.onopen = () => {\n    // console.log('Socket channel connected')\n    isConnected = true\n    dispatch(Actions.updateSocket(websocket))\n  }\n\n  // Xử lý dữ liệu server trả về\n  websocket.onmessage = evt => {\n    const message = JSON.parse(evt.data)\n    // dispatch(Actions.updateText(message.result.hypotheses[0].transcript_normed))\n    dispatch(Actions.updateText(processJsonResponse(message)))\n    // console.log(message)\n  }\n\n  websocket.onclose = () => {\n    // console.log('Websocket closed')\n    // stop()\n  }\n  return <SendDataComponent />\n}\n\nexport const SocketRecognation = () => {\n  // console.log(\"SocketRecognation render\")\n  const dispatch = useDispatch()\n  // const audioRedux = useSelector(state => state.recognitionReducer.audioData)\n  const [ws, setWs] = useState(null)\n  const [connectWs, setConnectWs] = useState(false)\n  // useEffect(() => {\n  //   console.log(ws)\n  // }, [ws])\n  const [state, setState] = useState({\n    token: 'k-P-k03vy7MgQ0iV8ItD5oLrjh7CigLWMR1oCeP5QMGs461nNu07k-VzENKNQW-c'\n  })\n\n  /**\n   * Dừng record audio.\n   */\n  const stop = () => {\n    // Đánh dấu dừng\n    isStop = true\n\n    // $('#plain-text').scrollTop($('#plain-text')[0].scrollHeight)\n    // clearCanvas()\n  }\n\n  /**\n   * Đóng web socket.\n   */\n  const closeWS = () => {\n    if (ws && ws.readyState == ws.OPEN) {\n      ws.send('EOS')\n    }\n  }\n\n  const drawBuffer = data => {\n    // var canvas = document.getElementById(\"canvas\");\n    // var width = canvas.width;\n    // var height = canvas.height;\n    // var context = canvas.getContext('2d');\n    // context.clearRect (0, 0, width, height);\n    // var step = Math.floor(data.length / width);\n    // var amp = height / 2;\n    // var x = 0;\n    // var y = amp;\n    // context.strokeStyle = \"#FFFFFF\";\n    // context.beginPath();\n    // context.moveTo(x, y);\n    // for (var i = 0; i < width; i++) {\n    //     x = i;\n    //     // Tính giá trị y\n    //     var min = 1.0;\n    //     var max = -1.0;\n    //     for (var j = 0; j < step; j++) {\n    //         var datum = data[(i * step) + j];\n    //         if (datum < min) {\n    //             min = datum;\n    //         }\n    //         if (datum > max) {\n    //             max = datum;\n    //         }\n    //     }\n    //     y = ((min + max) / 2 + 1) * amp;\n    //     context.lineTo(x, y);\n    // }\n    // context.stroke();\n  }\n\n  const record = connectedWs => {\n    // console.log('click record')\n    if (connectedWs) {\n      // close websocket before stop\n      dispatch(Actions.updateAudioData('EOS'))\n    }\n    dispatch(Actions.updateConnectedWS(!connectedWs))\n\n    // Nếu đang xử lý thì dừng lại\n    // if (!isStop) {\n    //   closeWS()\n    //   stop()\n    //   return\n    // }\n    // console.log('Record func called')\n    // Khởi tạo audioContext\n    if (!audioContext) {\n      audioContext = new (window.AudioContext || window.webkitAudioContext)()\n      if (audioContext.state == 'suspended') {\n        audioContext.resume()\n      }\n      // if(isStop)\n\n      navigator.mediaDevices\n        .getUserMedia({ audio: true })\n        .then(stream => {\n          let audioInput = audioContext.createMediaStreamSource(stream)\n          let bufferSize = 2048\n          recorder = audioContext.createScriptProcessor(bufferSize, 1, 1)\n\n          // Xử lý dữ liệu audio\n          recorder.onaudioprocess = e => {\n            if (!isStop) {\n              // Nếu mà không nói lâu quá thì cũng dừng lại\n              //if (countSilentDuration > SILENT_DURATION) {\n              //    closeWS();\n              //    stop();\n              //    countSilentDuration = 0;\n              //    return;\n              //}\n\n              buffer = e.inputBuffer.getChannelData(0)\n              drawBuffer(buffer)\n              let int16ArrayData = convertFloat32ToInt16(buffer)\n              countSilentDuration +=\n                int16ArrayData.length / audioContext.sampleRate\n              for (let i = 0; i < int16ArrayData.length; i++) {\n                if (Math.abs(int16ArrayData[i]) > SILENT_THRESHOLD) {\n                  countSilentDuration = 0\n                  break\n                }\n              }\n\n              // Gửi dữ liệu lên server\n              // print(int16ArrayData)\n              // ws.send(int16ArrayData.buffer)\n              // console.log(\"Audio data\", int16ArrayData.buffer)\n              dispatch(Actions.updateAudioData(int16ArrayData.buffer))\n            }\n          }\n\n          audioInput.connect(recorder)\n          recorder.connect(audioContext.destination)\n        })\n        .catch(e => {\n          console.log('Error when getUserMedia')\n          console.log(e)\n        })\n    }\n\n    // Đánh dấu đang chạy\n    isStop = false\n    if (!connectWs) {\n      setConnectWs(true)\n    }\n\n    return null\n  }\n\n  const connectedWs = useSelector(state => state.recognitionReducer.connectedWs)\n  return (\n    <Fragment>\n      {connectedWs && <TestSocket />}\n      <SpeechRecognition onRecord={() => record(connectedWs)} />\n    </Fragment>\n  )\n}\n\nconst convertFloat32ToInt16 = float32ArrayData => {\n  let l = float32ArrayData.length\n  let int16ArrayData = new Int16Array(l)\n  while (l--) {\n    int16ArrayData[l] = Math.min(1, float32ArrayData[l]) * 0x7fff\n  }\n  return int16ArrayData\n}\n\nconst processJsonResponse = resp => {\n  if (resp.status == 0 && resp.result && resp.result.hypotheses.length > 0) {\n    //console.log(resp);\n    // Shorthand of conditional operator\n    let transcript =\n      resp.result.hypotheses[0].transcript_normed ||\n      resp.result.hypotheses[0].transcript\n    let text = transcript // decodeURI(\n    //console.log(text);\n\n    // Không nhận dạng được\n    if (text == '<unk>.') {\n      return\n    }\n\n    if (text.endsWith('.')) {\n      // Xóa ký tự cuối cùng của xâu\n      text = text.slice(0, -1)\n    }\n\n    if (resp.result.final) {\n      // Đã nhận dạng xong, lưu kết quả\n      result = '<span>' + text + '. </span>'\n      // displayText(result);\n      // result += text + '.'\n    } else {\n      // Vẫn đang nhận dạng\n      // displayText(result + '<span class=\"temp\">' + text + '</span>');\n      result = '<span class=\"temp\">' + text + '</span>'\n    }\n\n    return result\n  }\n}\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADB/VeXAAAA7klEQVRIDe1VyxECIQwNjP2onWgNzh78FuP3sGMN2olrQ+BmMTNRCBo8OcolmSQvDxIIAIpVzZdNNVtdFBDoaYIBTB+MDqEk8Fdd+p+LLmoygsAbX+/Xw9cVe7/JlLdtsgyaTBcja+3JOTc+HrZnvoGcL8SFvJaDnnVj7ABtJLmfbCS5j+sRQUmdMaGES7wDuWR8Z7GexkUniIGfWb6fINGD0nmTxkUE9W7TXU1t5SVctgfeuwaJSHJSspHkPq63J0gfDYPurzf5A+R8gUDOyzfwoHePCWfXf0kVkOaNFI/26JrmgnOjXcIpCfQ34wa1rVfn0nvYzQAAAABJRU5ErkJggg==\""],"sourceRoot":""}